@page "/employees/create"
@using AssetManagement.Shared.Models
@using AssetManagementApp.Services
@inject IEmployeeClientService EmployeeService
@inject NavigationManager Navigation

<PageTitle>Create New Employee</PageTitle>

<EmployeeForm Employee="NewEmployee" 
              Title="Create" 
              OnSubmit="HandleCreateEmployee" />

@code {
    private Employee NewEmployee = new Employee();

    private async Task HandleCreateEmployee(Employee employeeToCreate)
    {
        try
        {
            await EmployeeService.AddEmployeeAsync(employeeToCreate);
            
            Navigation.NavigateTo("/employees");
        }
        catch (HttpRequestException ex)
        {
            Console.WriteLine($"Error creating employee: {ex.Message}");
        }
    }
}